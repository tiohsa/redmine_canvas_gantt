const i={fetchData:async()=>{const a=window.RedmineCanvasGantt;if(!a)throw new Error("Plugin configuration not found");const t=await fetch(`${a.apiBase}/data.json`,{headers:{"X-Redmine-API-Key":a.apiKey,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`API Error: ${t.statusText}`);const n=await t.json(),s=n.tasks.map((e,o)=>({id:String(e.id),subject:e.subject,startDate:new Date(e.start_date).getTime(),dueDate:new Date(e.due_date).getTime(),ratioDone:e.ratio_done,statusId:e.status_id,assignedToId:e.assigned_to_id,assignedToName:e.assigned_to_name,parentId:e.parent_id,lockVersion:e.lock_version,editable:e.editable,rowIndex:o}));return{...n,tasks:s}}};export{i as apiClient};
